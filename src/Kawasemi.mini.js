/*

https://github.com/yamazaki3104/BirdsScript

Copyright (c) 2014, YAMAZAKI Satoshi. All rights reserved.

*/
function kawasemi_interpreter(r){function G(){return{d:"[stack]",b:"list",a:[],c:"",e:!1,g:"null"}}function n(k){return k.g?{d:k.d,b:k.b,a:k.a,c:k.c,e:k.e,g:k.g}:{d:k.d,b:k.b,a:k.a,c:k.c,e:k.e}}function H(k){for(var a in k){var g=k[a];"list"===g.b?H(g.a):"[catch]"===g.d&&"func_no"===g.b&&"on_dtor"===g.c&&z(u[g.a])}}function B(k,a){for(;h.length>k;){var g=h.pop();if("[catch]"===g.d&&"[event]"===a.d&&g.c===a.c){if("func_no"===g.b){var w=a.a;if(w instanceof Array)for(var l in w){var s=n(w[l]);"."===s.c[0]&&(s.c="_"+s.c.substr(1,
s.c.length-1));h.push(s)}return z(u[g.a])}w={d:"[stack]",b:"list",a:[],c:"literal",e:!1,g:"literal"};g.f=w;w.a.push(g);return w}if("[catch]"===g.d&&"on_dtor"===g.c)return"func_no"===g.b?z(u[g.a]):{d:"[stack]",b:g.b,a:g.a,c:"literal",e:!1,g:"literal"};"list"===g.b&&H(g.a)}return a}function z(k){function a(a){return{d:"[event]",b:"run-time error",a:a,h:s}}function g(a){if("list_no"===a.b){var d=h.length;a=z(u[a.a]);a=B(d,a);if("[event]"===a.d)return a;for(var b in a.a)"[stack]"===a.a[b].d&&"."!==a.a[b].c[0]&&
(a.a[b].c="."+a.a[b].c);return a}if("ident"!==a.b)return a;for(b=h.length-1;0<=b;b--)if("[stack]"===h[b].d&&h[b].c===a.a)return h[b];b=n(a);b.c="_";return{d:"[event]",b:"exception",c:"on_undefined",h:""===s?"":s,a:[{d:"[stack]",b:"str",c:"_e",e:!1,a:"undefined symbol.: "+a.a},b]}}function w(b,d,e){var f=g(e);if("[event]"===f.d)return f;if("int"!==f.b)return a("variable type mismatch.: "+f.a+" "+f.b);e=!1;if("ident"!==d.b)e=d;else for(var k=h.length-1;0<=k;k--)if(h[k].c===d.a){e=h[k];break}if(!1!==
e){if(!0===e.e)return a("cannot be set to a read-only property.: "+e.c+"."+e.b);if("int"!==e.b)return a("variable type mismatch.: "+l(e));if("*="===b)return e.a*=f.a,n(e);if("/="===b){if(0===f.a)return b=n(e),b.c="_",d=n(f),d.c="_idx",{d:"[event]",b:"exception",c:"on_division_by_zero",h:""===s?"":s,a:[{d:"[stack]",b:"str",c:"_e",e:!1,a:"division by zero.: "+r(e)+" /= 0"},b,d]};e.a=Math.floor(e.a/f.a);return n(e)}if("%="===b){if(0===f.a)return b=n(e),b.c="_",d=n(f),d.c="_idx",{d:"[event]",b:"exception",
c:"on_division_by_zero",h:""===s?"":s,a:[{d:"[stack]",b:"str",c:"_e",e:!1,a:"division by zero.: "+r(e)+" %= 0"},b,d]};e.a%=f.a;return n(e)}if("+="===b)return e.a+=f.a,n(e);if("-="===b)return e.a-=f.a,n(e)}e=n(_v);e.c="_";return{d:"[event]",b:"exception",c:"on_undefined",h:""===s?"":s,a:[{d:"[stack]",b:"str",c:"_e",e:!1,a:"undefined symbol.: "+d.a},e]}}function l(a){if("int"===a.b||"str"===a.b||"bool"===a.b)return a.a;if("list"===a.b){var b="[ ",d;for(d in a.a){var e=a.a[d];"[stack]"===e.d&&"."===
e.c[0]&&(b+=l(g(e))+", ")}return b+"]"}if("func_no"===a.b){b="{ ";for(d in a.a)e=a.a[d],"[stack]"===e.d&&"."===e.c[0]&&(b+=l(g(e))+", ");return b+="}"}return a.b}function r(a){if("str"===a.b)return a.c+":'"+a.a+"'.str";if("int"===a.b||"bool"===a.b)return a.c+":"+a.a+"."+a.b;if("list"===a.b){var b=a.c+":[ ",d;for(d in a.a){var e=a.a[d];"[stack]"===e.d&&(b+=r(g(e))+", ")}b+="]";a.g&&(b+="."+a.g);return b}if("func_no"===a.b){b=a.c+":{ ";for(d in a.a)e=a.a[d],"[stack]"===e.d&&(b+=r(g(e))+", ");return b+
"}"}return a.c+":"+a.a+"."+a.b}if(!k)return[];for(var p=[],C=0;C<k.length;C++){var b=k[C];if("ident"!==b.b||")"!==b.a)p.push(b);else{for(var d=[],f=p.length-1;0<=f&&(b=p.pop(),d.unshift(b),"ident"!==b.b||"("!==b.a[0]);--f);if(!(0>=d.length))if(b=d[0].a,"(scope"===b){var f=h.length,e=z(u[d[1].a]),b=B(f,e);if("[event]"===b.d)return b;"list"===b.b&&0<b.a.length?p.push(b.a[b.a.length-1]):p.push(b)}else if("(,"===b){if(2>d.length)return a("arg_size < 2 : "+b);if(2<d.length)return a("arg_size > 2 : "+b);
f=g(d[1]);if("[event]"===f.d)return f;p.push(n(f))}else if("(;"===b)for(var m in d){if("0"!==m&&(f=g(d[m]),"[event]"===f.d))return f}else if("(at"===b||"(."===b){if(3>d.length)return a("arg_size < 3 : "+b);if(3<d.length)return a("arg_size > 3 : "+b);f=g(d[1]);if("[event]"===f.d)return f;e=d[2];if("(at"===b&&(e=g(d[2]),"[event]"===e.d))return e;if("ident"===e.b||"int"===e.b||"str"===e.b){var t=("."===e.a[0]?"":".")+e.a,d=!1;if("(."===b&&".type"===t)d=f.b,"func_no"===d&&(d="func"),d={d:"[stack]",b:"str",
a:d,c:"literal",e:!1},p.push(d);else if("(."===b&&".size"===t){d=f.b;if("list"!==d)return a("not list-object : "+f.c+"."+f.b);d={d:"[stack]",b:"int",a:f.a.length,c:"literal",e:!1};p.push(d)}else"(."===b&&".detail"===t&&(d={d:"[stack]",b:"str",a:r(f),c:"literal",e:!1},p.push(d));if(!1===d&&"[stack]"===f.d&&"list"===f.b){if(!1===d)for(m in f.a){d=f.a[m];if(d.c===t){p.push(d);break}d=!1}if(!1===d){b="";for(m=h.length-1;0<=m;m--)if("[stack]"===h[m].d&&h[m].c===t){d=h[m];break}!1!==d&&"int"===d.b&&0<=
d.a&&d.a<f.a.length&&p.push(f.a[d.a])}if(!1===d)for(m in f.a){d=f.a[m];if(".unmatch"===d.c){d=n(d);p.push(d);break}d=!1}}if(!1===d){for(m=h.length-1;0<=m;m--)if("[stack]"===h[m].d&&"unmatch"===h[m].c){d=n(h[m]);break}if(!1!==d&&"func_no"===d.b){var b=h.length,q=n(f);q.c="_";h.push(q);h.push({d:"[stack]",b:"str",c:"_idx",e:!1,a:e.a});d=z(u[d.a]);b=B(b,d);if("[event]"===d.d)return d;"[stack]"===d.d&&0<d.a.length?p.push(d):d=!1}}if(!1===d)return p=n(f),p.c="_",{d:"[event]",b:"exception",c:"on_unmatch",
h:""===s?"":s,a:[{d:"[stack]",b:"str",c:"_e",e:!1,a:"unmatch index.: "+f.c+t},p,{d:"[stack]",b:"str",c:"_idx",e:!1,a:e.a}]}}else if("list"===e.b&&"list"===f.b&&"list"===e.b){d={d:"[stack]",b:"list",a:[],c:"literal",e:!1};for(m in e.a){var t="."+e.a[m].a,b=!1,E;for(E in f.a)if(q=f.a[E],t===q.c){b=n(q);b.c="."+d.a.length;d.a.push(b);b=!0;break}if(!1===b)for(E in f.a)if(q=f.a[E],".unmatch"===q.c){q=n(q);d.a.push(q);break}}p.push(d)}}else if("(:"===b||"(::"===b||"(->>"===b||"(<<-"===b){if(3>d.length)return a("arg_size < 3 : "+
b);if(3<d.length)return a("arg_size > 3 : "+b);f=d[1].a;if("ident"!==d[1].b){if("int"!==d[1].b)return a("cannot define.: "+f);f=""+f}e=g(d[2]);if("[event]"===e.d)return e;e={d:"[stack]",b:e.b,a:e.a,c:f,e:"(::"!==b};"(->>"===b?e.d="[catch]":"(<<-"===b&&(e.d="[label]");h.push(e);p.push(e)}else if("(="===b){if(3>d.length)return a("arg_size < 3 : "+b);if(3<d.length)return a("arg_size > 3 : "+b);e=function(b,d){var e=g(d);if("[event]"===e.d)return e;if("ident"!==b.b){if(!0===b.e&&!0===b.f.e)return a("cannot be set to a read-only property.: "+
b.f.c+"."+b.f.b);b.a=e.a;b.b=e.b;return b}for(var f=!1,k=h.length-1;0<=k;k--)if(f=h[k],"[stack]"===f.d&&f.c===b.a){if(!0===f.e)return a("cannot be set to a read-only property.: "+f.c+"."+f.b);if(f.b!==e.b)return a("type mismatch.: "+f.c+"."+f.b+" != "+e.c+"."+e.b);f.a=e.a;f.b=e.b;e=n(f);e.c="literal";return e}f=n(b);f.c="_";return{d:"[event]",b:"exception",c:"on_undefined",h:""===s?"":s,a:[{d:"[stack]",b:"str",c:"_e",e:!1,a:"undefined symbol.: "+b.a},f]}}(d[1],d[2]);if("[event]"===e.d)return e;p.push(e)}else if("(<<"===
b){if(3>d.length)return a("arg_size < 3 : "+b);if(3<d.length)return a("arg_size > 3 : "+b);if("out_stream"===d[1].g&&""===d[1].a){f=g(d[2]);if("[event]"===f.d)return f;D+=l(f);p.push(d[1])}else if("ident"!==d[1].b)return a("syntax-error?: "+b+" "+r(d[1]));for(m=h.length-1;0<=m;m--)if(q=h[m],"[stack]"===q.d&&q.c===d[1].a){if(!0===q.e)return a("cannot be set to a read-only property.: "+q.c+"."+q.b);if("list"===q.b){f=g(d[2]);if("[event]"===f.d)return f;"literal"===f.c?q.a.push({d:f.d,b:f.b,a:f.a,c:"."+
q.a.length,e:f.e,f:q}):(b=n(f),"."!==b.c[0]&&(b.c="."+b.c),q.a.push(b))}else if("str"===q.b)q.a=""+q.a+g(d[2]).a;else if("int"===q.b){p.push({d:"[stack]",b:q.b,a:q.a<<g(d[2]).a,c:"literal",e:!0});break}p.push(d[1]);break}}else if("(<"===b||"(>"===b||"(<="===b||"(>="===b||"(=="===b||"(!="===b||"(&&"===b||"(||"===b||"(*"===b||"(/"===b||"(%"===b||"(+"===b||"(-"===b||"(&"===b||"(|"===b||"(^"===b||"(>>"===b){if(3>d.length)return a("arg_size < 3 : "+b);if(3<d.length)return a("arg_size > 3 : "+b);p.push(function(b,
d,e){d=g(d);if("[event]"===d.d)return d;e=g(e);if("[event]"===e.d)return e;if(d.b!==e.b)return{d:"[stack]",b:"bool",a:!1,c:"literal",e:!0};if("(>"===b)return{d:"[stack]",b:"bool",a:d.a>e.a,c:"literal",e:!0};if("(<"===b)return{d:"[stack]",b:"bool",a:d.a<e.a,c:"literal",e:!0};if("(>="===b)return{d:"[stack]",b:"bool",a:d.a>=e.a,c:"literal",e:!0};if("(<="===b)return{d:"[stack]",b:"bool",a:d.a<=e.a,c:"literal",e:!0};if("(=="===b)return{d:"[stack]",b:"bool",a:d.a===e.a,c:"literal",e:!0};if("(!="===b)return{d:"[stack]",
b:"bool",a:d.a!==e.a,c:"literal",e:!0};if("(&&"===b)return{d:"[stack]",b:"bool",a:d.a&&e.a,c:"literal",e:!0};if("(||"===b)return{d:"[stack]",b:"bool",a:d.a||e.a,c:"literal",e:!0};if("str"===d.b&&"str"===e.b&&1===d.a.length&&1===e.a.length){if("(+"===b)return{d:"[stack]",b:d.b,a:String.fromCharCode(d.a.charCodeAt(0)+e.a.charCodeAt(0)),c:"literal",e:!0};if("(-"===b)return{d:"[stack]",b:d.b,a:String.fromCharCode(d.a.charCodeAt(0)-e.a.charCodeAt(0)),c:"literal",e:!0}}return"(*"===b?{d:"[stack]",b:d.b,
a:d.a*e.a,c:"literal",e:!0}:"(/"===b?0===e.a?(b=n(d),b.c="_",e=n(e),e.c="_idx",{d:"[event]",b:"exception",c:"on_division_by_zero",h:""===s?"":s,a:[{d:"[stack]",b:"str",c:"_e",e:!1,a:"division by zero.: "+r(d)+" / 0"},b,e]}):{d:"[stack]",b:d.b,a:Math.floor(d.a/e.a),c:"literal",e:!0}:"(%"===b?0===e.a?(b=n(d),b.c="_",e=n(e),e.c="_idx",{d:"[event]",b:"exception",c:"on_division_by_zero",h:""===s?"":s,a:[{d:"[stack]",b:"str",c:"_e",e:!1,a:"division by zero.: "+r(d)+" % 0"},b,e]}):{d:"[stack]",b:d.b,a:d.a%
e.a,c:"literal",e:!0}:"(+"===b?{d:"[stack]",b:d.b,a:d.a+e.a,c:"literal",e:!0}:"(-"===b?{d:"[stack]",b:d.b,a:d.a-e.a,c:"literal",e:!0}:"(&"===b?{d:"[stack]",b:d.b,a:d.a&e.a,c:"literal",e:!0}:"(|"===b?{d:"[stack]",b:d.b,a:d.a|e.a,c:"literal",e:!0}:"(^"===b?{d:"[stack]",b:d.b,a:d.a^e.a,c:"literal",e:!0}:"(>>"===b?{d:"[stack]",b:d.b,a:d.a>>e.a,c:"literal",e:!0}:a(b)}(b,d[1],d[2]))}else if("(??"===b){if(3>d.length)return a("arg_size < 3 : "+b);if(4<d.length)return a("arg_size > 4 : "+b);if("bool"!==d[1].b)return a("argument type is not bool.: "+
d[1].c+"."+d[1].b);if(!0===d[1].a){e=z(u[d[2].a]);if("[event]"===e.d)return e;for(var F in e.a)p.push(e.a[F])}else if(4===d.length){e=z(u[d[3].a]);if("[event]"===e.d)return e;for(F in e.a)p.push(e.a[F])}}else if("(loop"===b){if(2>d.length)return a("arg_size < 2 : "+b);if(2<d.length)return a("arg_size > 2 : "+b);var q=999,t=h.length,x={d:"[stack]",b:"list",a:[],c:"literal",e:!1};h.push({d:"[stack]",b:"int",a:0,c:"idx",e:!0});for(var A=0;A<q;A++){h[t].a=A;b=h.length;e=z(u[d[1].a]);b=B(b,e);if("[event]"===
e.d&&"break"===e.b){for(m in e.a.a){var v=n(e.a.a[m]);"."===v.c[0]&&(v.f=x.a,v.c="."+x.a.length,x.a.push(v))}break}if("[event]"!==e.d||"continue"!==e.b){if("[event]"===e.d&&"[event]"!==b.d){e=b;break}if("[event]"===e.d)return e;for(m in b.a)v=n(b.a[m]),v.f=x.a,v.c="."+x.a.length,x.a.push(v)}}if(A>=q)return{d:"[event]",b:"exception",c:"on_loop_limit_over",h:""===s?"":s,a:[{d:"[stack]",b:"str",c:"e",e:!1,a:"loop limit over.: "+q}]};for(;h.length>t;)h.pop();p.push(x)}else if("(each"===b){if(3>d.length)return a("arg_size < 3 : "+
b);if(3<d.length)return a("arg_size > 3 : "+b);f=g(d[1]);if("[event]"===f.d)return f;q=0;if("str"===f.b)q=f.a.length;else if("int"===f.b)q=f.a;else if("list"===f.b)q=f.a.length;else return a("each type error: "+f.b);t=h.length;x={d:"[stack]",b:"list",a:[],c:"literal",e:!1};h.push({d:"[stack]",b:f.b,a:0,c:"it",e:!0});h.push({d:"[stack]",b:"int",a:0,c:"idx",e:!0});e=G();for(A=0;A<q;A++){"str"===f.b?h[t].a=f.a.substr(A,1):"int"===f.b?h[t].a=A:"list"===f.b&&(b=n(g(f.a[A])),b.c="it",h[t]=b);if("list"===
f.b){if(b=g(f.a[A]).c,"literal"!==b)if("."!==b[0])continue;else e=b.substr(1,b.length-1),b=parseInt(e,10),isNaN(b)?(h[t+1].a=e,h[t+1].b="str"):(h[t+1].a=b,h[t+1].b="int")}else h[t+1].a=A;b=h.length;e=z(u[d[2].a]);b=B(b,e);if("[event]"===e.d&&"break"===e.b){for(m in e.a.a)v=n(e.a.a[m]),v.f=x.a,v.c="."+x.a.length,x.a.push(v);break}if("[event]"!==e.d||"continue"!==e.b){if("[event]"===e.d&&"[event]"!==b.d){e=b;break}if("[event]"===e.d)return e;for(m in b.a)v=n(b.a[m]),v.f=x.a,v.c="."+x.a.length,x.a.push(v)}}for(;h.length>
t;)h.pop();p.push(x)}else{if("(break"===b){if(2>d.length)return a("arg_size < 2 : "+b);if(2<d.length)return a("arg_size > 2 : "+b);v=g(d[1]);return"list_no"!==v.b&&"list"!==v.b?a("argument type is not list-object.: "+b):{d:"[event]",b:"break",a:v}}if("(continue"===b)return 1>d.length?a("arg_size < 1 : "+b):1<d.length?a("arg_size > 1 : "+b):{d:"[event]",b:"continue",a:G()};if("(throw"===b)return 3>d.length?a("arg_size < 3 : "+b):3<d.length?a("arg_size > 3 : "+b):"ident"!==d[1].b?a("argument is not catch-name.: "+
b):"list_no"!==d[2].b&&"list"!==d[2].b?a("argument type is not list-object.: "+b):{d:"[event]",b:"exception",c:d[1].a,a:g(d[2]).a};if("(until"===b)return 3>d.length?a("arg_size < 3 : "+b):3<d.length?a("arg_size > 3 : "+b):"ident"!==d[1].b?a("argument is not repeat-name.: "+b):"list_no"!==d[2].b&&"list"!==d[2].b?a("argument is not list-object.: "+b):{d:"[event]",b:"until",c:d[1].a,a:g(d[2]).a};if("(++"===b){if(2>d.length)return a("arg_size < 2 : "+b);if(2<d.length)return a("arg_size > 2 : "+b);p.push(w("+=",
d[1],{d:"[token]",b:"int",a:1}))}else if("(--"===b){if(2>d.length)return a("arg_size < 2 : "+b);if(2<d.length)return a("arg_size > 2 : "+b);p.push(w("-=",d[1],{d:"[token]",b:"int",a:1}))}else if("(+="===b){if(3>d.length)return a("arg_size < 3 : "+b);if(3<d.length)return a("arg_size > 3 : "+b);p.push(w("+=",d[1],d[2]))}else if("(-="===b){if(3<d.length)return a("arg_size > 3 : "+b);if(3>d.length)return a("arg_size < 3 : "+b);p.push(w("-=",d[1],d[2]))}else if("(*="===b){if(3>d.length)return a("arg_size < 3 : "+
b);if(3<d.length)return a("arg_size > 3 : "+b);p.push(w("*=",d[1],d[2]))}else if("(/="===b){if(3>d.length)return a("arg_size < 3 : "+b);if(3<d.length)return a("arg_size > 3 : "+b);p.push(w("/=",d[1],d[2]))}else if("(%="===b){if(3>d.length)return a("arg_size < 3 : "+b);if(3<d.length)return a("arg_size > 3 : "+b);p.push(w("%=",d[1],d[2]))}else if("(call"===b){if(3>d.length)return a("arg_size < 3 : "+b);if(3<d.length)return a("arg_size > 3 : "+b);f=g(d[1]);if("[event]"===f.d)return f;t=h.length;if(3===
d.length){e=z(u[d[2].a]);if("[event]"===e.d)return e;for(m=h.length-1;t-1<m;m--)h[m].c="_"+h[m].c}for(d=0;d<t;d++)b=h[d].c,"_"===b[0]&&(h[d].c="_."+b);if(f.f)for(e=f.f.a,m=e.length-1;0<=m;m--)"[stack]"===e[m].d&&h.push(e[m]);b=h.length;if("func_no"!==f.b)return a("not function.: "+f.c+"."+f.b);e=z(u[f.a]);if("[event]"===e.d)if("return"!==e.b){if(e=B(b,e),"[event]"===e.d)return e}else e={d:"[stack]",b:"list",a:e.a,c:"out",e:!1,g:f.c};for(;b<h.length;)f=h.pop(),f.f=e,e.a.unshift(f);for(;t<h.length;)f=
h.pop();for(d in h)b=h[d].c,"_"===b[0]&&"."===b[1]&&(h[d].c=b.substr(2,b.length-2));p.push(e)}else{if("(return"===b){if(2>d.length)return a("arg_size < 2 : "+b);if(2<d.length)return a("arg_size > 2 : "+b);e=g(d[1]);if("[event]"===e.d)return e;if("list"!==e.b)return a("argument type is not list-object.: "+b);var y=[];for(m in p)k=p[m],"[stack]"===k.d&&(k.c?"literal"===k.c?k.c="."+y.length:"."!==k.c[0]&&(k.c="."+k.c):k.c="."+y.length,y.push(k));for(m in e.a)k=n(e.a[m]),e.a[m].c?"."!==k.c[0]&&(k.c="."+
k.c):(k=n(g(k)),k.c="."+y.length),y.push(k);return{d:"[event]",b:"return",a:y}}if("(range"===b){if(3>d.length)return a("arg_size < 3 : "+b);if(3<d.length)return a("arg_size > 3 : "+b);f=g(d[1]);if("[event]"===f.d)return f;if("int"!==f.b)return a("argument type is not int : "+f.c+"."+f.b);d=g(d[2]);if("[event]"===d.d)return d;if("int"!==d.b)return a("argument type is not int : "+d.c+"."+d.b);e={d:"[stack]",b:"list",a:[],c:"literal",e:!1};for(y=f.a;;)if(e.a.push({d:"[stack]",b:"int",a:y,c:"."+e.a.length,
e:!1}),f.a<d.a){if(++y,y>d.a)break}else if(--y,y<d.a)break;p.push(e)}else if("(line"===b)s=d[1].a;else return a("unsupported token.: "+b)}}}}m={d:"[stack]",b:"list",a:[],c:"literal",e:!1};if(0===p.length)return m;for(y in p){k=p[y];"ident"===k.b?k=g(k):"list_no"===k.b&&(k=g(k));if("[event]"===k.d)return k;k=n(k);"[stack]"===k.d&&("literal"===k.c&&(k.c=m.a.length),"."!==k.c[0]&&(k.c="."+k.c),k.f=m,m.a.push(k))}return m}var u=[],h=[],C=[],D="",s="",I=function(k){for(var a="",g=0;g<k.length;g++)switch(k[g]){case "'":a+=
"s";break;case '"':a+="S";break;case "/":a+="b";break;case "-":a+="b";break;case ".":a+="b";break;case "\n":a+="e";break;default:a+=" "}for(var h="",l=" ",g=0;g<a.length;g++){switch(a[g]){case "s":"s"===l?l=" ":"S"!==l&&(l="s");break;case "S":"S"===l?l=" ":"s"!==l&&(l="S")}h=" "!==l?h+l:h+a[g]}a="";l=" ";for(g=0;g<h.length;g++){c=h[g];switch(l+c){case " b":case "eb":"//"===k.substr(g,2)&&(c="c"),"---"===k.substr(g,3)&&(c="c"),"..."===k.substr(g,3)&&(c="c")}switch(c){case "c":l="c";break;case "e":l=
" "}" "===l&&(a+=k[g])}return a}(r);(function(k){u=[];for(var a=[],g=0;g<k.length;g++)if("}:}"===k[g])for(var h=[],l;l=a.pop();)if("ident"===l.b&&"{"===l.a){l=u.length;u.push(h);a.push({d:"[token]",b:"func_no",a:l});break}else h.unshift(l);else if("]:]"===k[g])for(h=[];l=a.pop();)if("ident"===l.b&&"["===l.a){l=u.length;u.push(h);a.push({d:"[token]",b:"list_no",a:l});break}else h.unshift(l);else h=k[g],"a:true"===h?h={d:"[stack]",b:"bool",a:!0,c:"literal",e:!0}:"a:false"===h?h={d:"[stack]",b:"bool",
a:!1,c:"literal",e:!0}:(l=h.substr(0,2),h="0:"===l?{d:"[stack]",b:"int",a:parseInt(h.substr(2,h.length-2),10),c:"literal",e:!0}:"s:"===l?{d:"[stack]",b:"str",a:h.substr(3,h.length-2-2),c:"literal",e:!0}:{d:"[token]",b:"ident",a:h.substr(2,h.length-2)}),a.push(h);u.push(a)})(function(h){for(var a="",g=0;g<I.length;g++)switch(h[g]){case " ":a+=" ";break;case "!":a+="a";break;case '"':a+="S";break;case "#":a+="a";break;case "$":a+="a";break;case "%":a+="a";break;case "&":a+="a";break;case "'":a+="s";
break;case "(":a+="a";break;case ")":a+=")";break;case "*":a+="a";break;case "+":a+="a";break;case ",":a+="a";break;case "-":a+="a";break;case ".":a+="a";break;case "/":a+="a";break;case "0":a+="0";break;case "1":a+="0";break;case "2":a+="0";break;case "3":a+="0";break;case "4":a+="0";break;case "5":a+="0";break;case "6":a+="0";break;case "7":a+="0";break;case "8":a+="0";break;case "9":a+="0";break;case ":":a+="a";break;case ";":a+="a";break;case "<":a+="a";break;case "=":a+="a";break;case ">":a+=
"a";break;case "?":a+="a";break;case "@":a+="a";break;case "A":a+="a";break;case "B":a+="a";break;case "C":a+="a";break;case "D":a+="a";break;case "E":a+="a";break;case "F":a+="a";break;case "G":a+="a";break;case "H":a+="a";break;case "I":a+="a";break;case "J":a+="a";break;case "K":a+="a";break;case "L":a+="a";break;case "M":a+="a";break;case "N":a+="a";break;case "O":a+="a";break;case "P":a+="a";break;case "Q":a+="a";break;case "R":a+="a";break;case "S":a+="a";break;case "T":a+="a";break;case "U":a+=
"a";break;case "V":a+="a";break;case "W":a+="a";break;case "X":a+="a";break;case "Y":a+="a";break;case "Z":a+="a";break;case "[":a+="[";break;case "\\":a+="a";break;case "]":a+="]";break;case "^":a+="a";break;case "_":a+="a";break;case "`":a+="a";break;case "a":a+="a";break;case "b":a+="a";break;case "c":a+="a";break;case "d":a+="a";break;case "e":a+="a";break;case "f":a+="a";break;case "g":a+="a";break;case "h":a+="a";break;case "i":a+="a";break;case "j":a+="a";break;case "k":a+="a";break;case "l":a+=
"a";break;case "m":a+="a";break;case "n":a+="a";break;case "o":a+="a";break;case "p":a+="a";break;case "q":a+="a";break;case "r":a+="a";break;case "s":a+="a";break;case "t":a+="a";break;case "u":a+="a";break;case "v":a+="a";break;case "w":a+="a";break;case "x":a+="a";break;case "y":a+="a";break;case "z":a+="a";break;case "{":a+="{";break;case "|":a+="a";break;case "}":a+="}";break;case "~":a+="a";break;default:a+=" "}for(var n="",l=" ",g=0;g<a.length;g++){switch(a[g]){case "s":"s"===l?l=" ":"S"!==
l&&(l="s");break;case "S":"S"===l?l=" ":"s"!==l&&(l="S")}" "===l&&0<g&&"a"===a[g-1]&&"0"===a[g]?l="a":"a"===l&&"a"!==a[g]&&"0"!==a[g]&&(l=" ");n=" "!==l?n+l:n+a[g]}for(var a="",l=n[0],r=[],g=0;g<n.length;g++)l===n[g]?a+=h[g]:(" "!==l&&r.push(l+":"+a),a=h[g],l=n[g]);" "!==l&&r.push(l+":"+a);return r}(I));r={d:"[stack]",b:"list",a:[],c:"@",e:!1,g:"system_root"};r.a.push({d:"[stack]",b:"list",a:"",c:".co",e:!1,g:"out_stream"});h.push(r);r=z(u[u.length-1]);r=B(0,r);"[event]"===r.d&&C.push(""+r.b+": "+
("exception"===r.b?0<r.a.length?r.c+" "+r.a[0].a:r.c:r.a)+(r.hasOwnProperty("debug_line")&&""!==r.h?"\n\tline:"+r.h:""));for(var J in C)D+="\n"+C[J];return D};
