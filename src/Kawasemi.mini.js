/*

https://github.com/yamazaki3104/BirdsScript

Copyright (c) YAMAZAKI Satoshi. All rights reserved.

KAWASEMI INTERPRETER 1.0 for Javascript

*/
function kawasemi_interpreter(t){function r(g){return g.f?{d:g.d,b:g.b,a:g.a,c:g.c,e:g.e,f:g.f}:{d:g.d,b:g.b,a:g.a,c:g.c,e:g.e}}function I(g){for(var a in g){var h=g[a];"list"===h.b?I(h.a):"[catch]"===h.d&&"func_no"===h.b&&"on_dtor"===h.c&&z(v[h.a])}}function B(D,a){for(;g.length>D;){var h=g.pop();if("[catch]"===h.d&&"[event]"===a.d&&h.c===a.c){if("func_no"===h.b){var q=a.a;if(q instanceof Array)for(var m in q){var u=r(q[m]);"#"===u.c[0]&&(u.c="_"+u.c.substr(1,u.c.length-1));g.push(u)}return z(v[h.a])}q={d:"[stack]",
b:"list",a:[],c:"literal",e:!1,f:"catch"};h.g=q;q.a.push(h);return q}if("[catch]"===h.d&&"on_dtor"===h.c)return"func_no"===h.b?z(v[h.a]):{d:"[stack]",b:h.b,a:h.a,c:"literal",e:!1,f:"on_dtor"};"list"===h.b&&I(h.a)}return a}function z(D){function a(a){return{d:"[event]",b:"run-time error",a:a,h:u}}function h(a){if("list_no"===a.b){var b=g.length;a=z(v[a.a]);return B(b,a)}if("ident"!==a.b)return a;for(b=g.length-1;0<=b;b--)if(g[b].c===a.a)return b=r(g[b]);b=r(a);b.c="_";return{d:"[event]",b:"exception",
c:"on_undefined",h:""===u?"":u,a:[{d:"[stack]",b:"str",c:"_e",e:!1,a:"undefined symbol.: "+a.a},b]}}function q(b,d,e){var f=h(e);if("[event]"===f.d)return f;if("int"!==f.b)return a("variable type mismatch.: "+m(f));e=!1;if("ident"!==d.b)e=d;else for(var k=g.length-1;0<=k;k--)if(g[k].c===d.a){e=g[k];break}if(!1!==e){if(!0===e.e)return a("cannot be set to a read-only property.: "+e.c+"."+e.b);if("int"!==e.b)return a("variable type mismatch.: "+m(e));if("*="===b)return e.a*=f.a,r(e);if("/="===b){if(0===
f.a)return b=r(e),b.c="_",d=r(f),d.c="_idx",{d:"[event]",b:"exception",c:"on_division_by_zero",h:""===u?"":u,a:[{d:"[stack]",b:"str",c:"_e",e:!1,a:"division by zero.: "+t(e)+" /= 0"},b,d]};e.a=Math.floor(e.a/f.a);return r(e)}if("%="===b){if(0===f.a)return b=r(e),b.c="_",d=r(f),d.c="_idx",{d:"[event]",b:"exception",c:"on_division_by_zero",h:""===u?"":u,a:[{d:"[stack]",b:"str",c:"_e",e:!1,a:"division by zero.: "+t(e)+" %= 0"},b,d]};e.a%=f.a;return r(e)}if("+="===b)return e.a+=f.a,r(e);if("-="===b)return e.a-=
f.a,r(e)}e=r(d);e.c="_";return{d:"[event]",b:"exception",c:"on_undefined",h:""===u?"":u,a:[{d:"[stack]",b:"str",c:"_e",e:!1,a:"undefined symbol.: "+d.a},e]}}function m(a){if("int"===a.b||"str"===a.b||"bool"===a.b)return a.a;if("list"===a.b){var b="[ ",d;for(d in a.a){var e=a.a[d];"[stack]"===e.d&&"#"===e.c[0]&&(b+=m(h(e))+", ")}return b+"]"}return"func_no"===a.b?"{ }":a.b}function t(a){if("str"===a.b)return a.c+":'"+a.a+"'.str";if("int"===a.b||"bool"===a.b)return a.c+":"+a.a+"."+a.b;if("list"===a.b){var b=
a.c+":[ ",d;for(d in a.a){var e=a.a[d];"[stack]"===e.d&&(b+=t(h(e))+", ")}b+="]";a.f&&(b+="."+a.f);return b}return"func_no"===a.b?(a.c?a.c:"literal")+":{ }":a.c+":"+a.a+"."+a.b}function C(a){if("str"===a.b)return a.a;if("int"===a.b||"bool"===a.b)return""+a.a;if("list"===a.b){var b="[ ",d;for(d in a.a){var e=a.a[d];"[stack]"===e.d&&(b+=C(h(e))+", ")}return b+"]"}return"func_no"===a.b?"{ }":""}if(!D)return[];for(var p=[],G=0;G<D.length;G++){var d=D[G];if("ident"!==d.b||")"!==d.a)p.push(d);else{for(var b=
[],e=p.length-1;0<=e;--e){var f=p.pop();b.unshift(f);if("ident"===f.b&&"("===f.a[0])break}if(!(0>=b.length))if(d=b[0].a,"(scope"===d){var e=g.length,k=z(v[b[1].a]),w=B(e,k);if("[event]"===w.d)return w;"list"===w.b&&0<w.a.length?p.push(w.a[w.a.length-1]):p.push(w)}else if("(,"===d){if(2>b.length)return a("arg_size < 2 : "+d);if(2<b.length)return a("arg_size > 2 : "+d);e=h(b[1]);if("[event]"===e.d)return e;p.push(r(e))}else if("(;"===d)for(var l in b){if("0"!==l&&(e=h(b[l]),"[event]"===e.d))return e}else if("(at"===
d||"(."===d){if(3>b.length)return a("arg_size < 3 : "+d);if(3<b.length)return a("arg_size > 3 : "+d);e=h(b[1]);if("[event]"===e.d)return e;var s=b[2];if("(at"===d&&(s=h(b[2]),"[event]"===s.d))return s;if("ident"===s.b||"int"===s.b||"str"===s.b){var n=("."===s.a[0]?"":".")+s.a,b=!1;"(."===d&&".type"===n?(f=e.b,"func_no"===f&&(f="func"),b={d:"[stack]",b:"str",a:f,c:"literal",e:!1},p.push(b)):"(."===d&&".size"===n?(f=e.b,"list"===f?(b={d:"[stack]",b:"int",a:e.a.length,c:"literal",e:!1},p.push(b)):"str"===
f&&(b={d:"[stack]",b:"int",a:e.a.length,c:"literal",e:!1},p.push(b))):"(."===d&&".detail"===n?(b={d:"[stack]",b:"str",a:t(e),c:"literal",e:!1},p.push(b)):"(."===d&&".str"===n?(b={d:"[stack]",b:"str",a:C(e),c:"literal",e:!1},p.push(b)):"(."===d&&".int"===n&&(b={d:"[stack]",b:"int",a:parseInt(e.a,10),c:"literal",e:!1},p.push(b));if(!1===b&&"[stack]"===e.d&&"list"===e.b){d="#"+n.substr(1,n.length-1);if(!1===b)for(l in e.a){b=e.a[l];if(b.c===d){p.push(b);break}b=!1}if(!1===b){f="";for(l=g.length-1;0<=
l;l--)if("[stack]"===g[l].d&&g[l].c===d){b=g[l];break}if(!1!==b&&"int"===b.b&&0<=b.a&&b.a<e.a.length)p.push(e.a[b.a]);else if(!1!==b&&"func_no"===b.b)if(f=g.length,d=r(e),d.c="#",g.push(d),b=z(v[b.a]),w=B(f,b),"[event]"===b.d)if("return"===b.b&&0<b.a.length)p.push({d:"[stack]",b:"list",a:b.a,c:"literal",e:!1,f:n});else return b;else p.push(b)}if(!1===b)for(l in e.a){b=e.a[l];if("#unmatch"===b.c){b=r(b);p.push(b);break}b=!1}}if(!1===b&&"[stack]"===e.d&&"func_no"===e.b){f=g.length;d=r(s);d.c="#idx";
g.push(d);b=z(v[e.a]);w=B(f,b);if("[event]"===b.d)if("return"===b.b&&0<b.a.length)p.push({d:"[stack]",b:"list",a:b.a,c:"literal",e:!1,f:n});else return b;for(b.f=e.c;f<g.length;)d=g.pop(),d.g=k,b.a.unshift(d);for(;y<g.length;)d=g.pop();p.push(b)}if(!1===b){f=""+s.a;f="#"+f.substr(1,f.length-1);for(l=g.length-1;0<=l;l--)if("[stack]"===g[l].d&&g[l].c===f){b=r(g[l]);break}if(!1!==b&&"func_no"===b.b)if(f=g.length,d=r(e),d.c="#",g.push(d),b=z(v[b.a]),w=B(f,b),"[event]"===b.d)if("return"===b.b&&0<b.a.length)p.push({d:"[stack]",
b:"list",a:b.a,c:"literal",e:!1,f:n});else return b;else p.push(b)}if(!1===b){for(l=g.length-1;0<=l;l--)if("[stack]"===g[l].d&&"unmatch"===g[l].c){b=r(g[l]);break}if(!1!==b&&"func_no"===b.b)if(f=g.length,d=r(e),d.c="_",g.push(d),g.push({d:"[stack]",b:"str",c:"_idx",e:!1,a:s.a}),b=z(v[b.a]),w=B(f,b),"[event]"===b.d)if("return"===b.b&&0<b.a.length)p.push({d:"[stack]",b:"list",a:b.a,c:"literal",e:!1,f:n});else return b;else"[stack]"===b.d&&0<b.a.length?p.push(b):b=!1}if(!1===b)return p=r(e),p.c="_",
{d:"[event]",b:"exception",c:"on_unmatch",h:""===u?"":u,a:[{d:"[stack]",b:"str",c:"_e",e:!1,a:"unmatch member-name.: "+n},p,{d:"[stack]",b:"str",c:"_idx",e:!1,a:s.a}]}}else if("list"===s.b&&"list"===e.b&&"list"===s.b){b={d:"[stack]",b:"list",a:[],c:"literal",e:!1,f:n};for(l in s.a){var f="#"+s.a[l].a,d=!1,F;for(F in e.a){var x=e.a[F];if(f===x.c){f=r(x);f.c="#"+b.a.length;b.a.push(f);d=!0;break}}if(!1===d)for(F in e.a)if(x=e.a[F],"#unmatch"===x.c){x=r(x);b.a.push(x);d=!0;break}}p.push(b)}}else if("(:"===
d||"(::"===d||"(->>"===d||"(<<-"===d){if(3>b.length)return a("arg_size < 3 : "+d);if(3<b.length)return a("arg_size > 3 : "+d);e=b[1].a;if("ident"!==b[1].b){if("int"!==b[1].b)return a("cannot define.: "+e);e=""+e}s=h(b[2]);if("[event]"===s.d)return s;k={d:"[stack]",b:s.b,a:s.a,c:e,e:"(::"!==d,f:s.f};"(->>"===d?k.d="[catch]":"(<<-"===d&&(k.d="[label]");g.push(k);p.push(k)}else if("(="===d){if(3>b.length)return a("arg_size < 3 : "+d);if(3<b.length)return a("arg_size > 3 : "+d);k=function(b,d){var e=
h(d);if("[event]"===e.d)return e;if("ident"!==b.b){if(!0===b.e&&!0===b.g.e)return a("cannot be set to a read-only property.: "+b.g.c+"."+b.g.b);b.a=e.a;b.b=e.b;return b}for(var f=!1,k=g.length-1;0<=k;k--)if(f=g[k],"[stack]"===f.d&&f.c===b.a){if(!0===f.e)return a("cannot be set to a read-only property.: "+f.c+"."+f.b);if(f.b!==e.b)return a("type mismatch.: "+f.c+"."+f.b+" != "+e.c+"."+e.b);f.a=e.a;f.b=e.b;e=r(f);e.c="literal";return e}f=r(b);f.c="_";return{d:"[event]",b:"exception",c:"on_undefined",
h:""===u?"":u,a:[{d:"[stack]",b:"str",c:"_e",e:!1,a:"undefined symbol.: "+b.a},f]}}(b[1],b[2]);if("[event]"===k.d)return k;p.push(k)}else if("(<<"===d){if(3>b.length)return a("arg_size < 3 : "+d);if(3<b.length)return a("arg_size > 3 : "+d);if("out_stream"===b[1].f&&""===b[1].a){e=h(b[2]);if("[event]"===e.d)return e;E+=m(e);p.push(b[1])}else if("ident"!==b[1].b)return a("syntax-error?: "+d+" "+t(b[1]));for(l=g.length-1;0<=l;l--)if(d=g[l],"[stack]"===d.d&&d.c===b[1].a){if(!0===d.e)return a("cannot be set to a read-only property.: "+
d.c+"."+d.b);if("list"===d.b){e=h(b[2]);if("[event]"===e.d)return e;"literal"===e.c?d.a.push({d:e.d,b:e.b,a:e.a,c:"#"+d.a.length,e:e.e,g:d}):(f=r(e),"#"!==f.c[0]&&(f.c="#"+d.a.length),d.a.push(f))}else if("str"===d.b)d.a=""+d.a+h(b[2]).a;else if("int"===d.b){p.push({d:"[stack]",b:d.b,a:d.a<<h(b[2]).a,c:"literal",e:!0});break}p.push(b[1]);break}}else if("(<"===d||"(>"===d||"(<="===d||"(>="===d||"(=="===d||"(!="===d||"(&&"===d||"(||"===d||"(*"===d||"(/"===d||"(%"===d||"(+"===d||"(-"===d||"(&"===d||
"(|"===d||"(^"===d||"(>>"===d){if(3>b.length)return a("arg_size < 3 : "+d);if(3<b.length)return a("arg_size > 3 : "+d);k=function(b,d,e){d=h(d);if("[event]"===d.d)return d;e=h(e);return"[event]"===e.d?e:d.b!==e.b?{d:"[stack]",b:"bool",a:!1,c:"literal",e:!0}:"(>"===b?{d:"[stack]",b:"bool",a:d.a>e.a,c:"literal",e:!0}:"(<"===b?{d:"[stack]",b:"bool",a:d.a<e.a,c:"literal",e:!0}:"(>="===b?{d:"[stack]",b:"bool",a:d.a>=e.a,c:"literal",e:!0}:"(<="===b?{d:"[stack]",b:"bool",a:d.a<=e.a,c:"literal",e:!0}:"(=="===
b?{d:"[stack]",b:"bool",a:d.a===e.a,c:"literal",e:!0}:"(!="===b?{d:"[stack]",b:"bool",a:d.a!==e.a,c:"literal",e:!0}:"(&&"===b?{d:"[stack]",b:"bool",a:d.a&&e.a,c:"literal",e:!0}:"(||"===b?{d:"[stack]",b:"bool",a:d.a||e.a,c:"literal",e:!0}:"(*"===b?{d:"[stack]",b:d.b,a:d.a*e.a,c:"literal",e:!0}:"(/"===b?0===e.a?(b=r(d),b.c="_",e=r(e),e.c="_idx",{d:"[event]",b:"exception",c:"on_division_by_zero",h:""===u?"":u,a:[{d:"[stack]",b:"str",c:"_e",e:!1,a:"division by zero.: "+t(d)+" / 0"},b,e]}):{d:"[stack]",
b:d.b,a:Math.floor(d.a/e.a),c:"literal",e:!0}:"(%"===b?0===e.a?(b=r(d),b.c="_",e=r(e),e.c="_idx",{d:"[event]",b:"exception",c:"on_division_by_zero",h:""===u?"":u,a:[{d:"[stack]",b:"str",c:"_e",e:!1,a:"division by zero.: "+t(d)+" % 0"},b,e]}):{d:"[stack]",b:d.b,a:d.a%e.a,c:"literal",e:!0}:"(+"===b?{d:"[stack]",b:d.b,a:d.a+e.a,c:"literal",e:!0}:"(-"===b?{d:"[stack]",b:d.b,a:d.a-e.a,c:"literal",e:!0}:"(&"===b?{d:"[stack]",b:d.b,a:d.a&e.a,c:"literal",e:!0}:"(|"===b?{d:"[stack]",b:d.b,a:d.a|e.a,c:"literal",
e:!0}:"(^"===b?{d:"[stack]",b:d.b,a:d.a^e.a,c:"literal",e:!0}:"(>>"===b?{d:"[stack]",b:d.b,a:d.a>>e.a,c:"literal",e:!0}:a(b)}(d,b[1],b[2]);if("[event]"===k.d)return k;p.push(k)}else if("(??"===d){if(3>b.length)return a("arg_size < 3 : "+d);if(4<b.length)return a("arg_size > 4 : "+d);if("bool"!==b[1].b)return a("argument type is not bool.: "+b[1].c+"."+b[1].b);if(!0===b[1].a){k=z(v[b[2].a]);if("[event]"===k.d)return k;for(var H in k.a)p.push(k.a[H])}else if(4===b.length){k=z(v[b[3].a]);if("[event]"===
k.d)return k;for(H in k.a)p.push(k.a[H])}}else if("(loop"===d){if(2>b.length)return a("arg_size < 2 : "+d);if(2<b.length)return a("arg_size > 2 : "+d);var s=999,y=g.length,d={d:"[stack]",b:"list",a:[],c:"literal",e:!1,f:"loop"};g.push({d:"[stack]",b:"int",a:0,c:"idx",e:!0});for(x=0;x<s;x++){g[y].a=x;f=g.length;k=z(v[b[1].a]);w=B(f,k);if("[event]"===k.d&&("break"===k.b||"continue"===k.b)){for(l in k.a.a)f=r(k.a.a[l]),"#"===f.c[0]&&(f.g=d.a,f.c="#"+d.a.length,d.a.push(f));if("continue"===k.b)continue;
break}if("[event]"===k.d&&"[event]"!==w.d){k=w;break}if("[event]"===k.d)return k;for(l in w.a)f=r(w.a[l]),f.g=d.a,f.c="#"+d.a.length,d.a.push(f)}if(x>=s)return{d:"[event]",b:"exception",c:"on_loop_limit_over",h:""===u?"":u,a:[{d:"[stack]",b:"str",c:"e",e:!1,a:"loop limit over.: "+s}]};for(;g.length>y;)g.pop();p.push(d)}else if("(each"===d){if(3>b.length)return a("arg_size < 3 : "+d);if(3<b.length)return a("arg_size > 3 : "+d);e=h(b[1]);if("[event]"===e.d)return e;s=0;if("str"===e.b)s=e.a.length;else if("int"===
e.b)s=e.a;else if("list"===e.b)s=e.a.length;else return a("each type error: "+e.b);y=g.length;d={d:"[stack]",b:"list",a:[],c:"literal",e:!1,f:"each"};g.push({d:"[stack]",b:e.b,a:0,c:"it",e:!0});g.push({d:"[stack]",b:"int",a:0,c:"idx",e:!0});k={d:"[stack]",b:"list",a:[],c:"",e:!1,f:"null"};for(x=0;x<s;x++){"str"===e.b?g[y].a=e.a.substr(x,1):"int"===e.b?g[y].a=x:"list"===e.b&&(f=r(h(e.a[x])),f.c="it",g[y]=f);if("list"===e.b){if(f=h(e.a[x]).c,"literal"!==f)if("#"!==f[0])continue;else k=f.substr(1,f.length-
1),f=parseInt(k,10),isNaN(f)?(g[y+1].a=k,g[y+1].b="str"):(g[y+1].a=f,g[y+1].b="int")}else g[y+1].a=x;f=g.length;k=z(v[b[2].a]);w=B(f,k);if("[event]"===k.d&&("break"===k.b||"continue"===k.b)){for(l in k.a.a)f=r(k.a.a[l]),f.g=d.a,f.c="#"+d.a.length,d.a.push(f);if("continue"===k.b)continue;break}if("[event]"===k.d&&"[event]"!==w.d){k=w;break}if("[event]"===k.d)return k;for(l in w.a)f=r(w.a[l]),f.g=d.a,f.c="#"+d.a.length,d.a.push(f)}for(;g.length>y;)g.pop();p.push(d)}else{if("(break"===d){if(2>b.length)return a("arg_size < 2 : "+
d);if(2<b.length)return a("arg_size > 2 : "+d);f=h(b[1]);return"list_no"!==f.b&&"list"!==f.b?a("argument type is not list-object.: "+d):{d:"[event]",b:"break",a:f}}if("(continue"===d){if(2>b.length)return a("arg_size < 2 : "+d);if(2<b.length)return a("arg_size > 2 : "+d);f=h(b[1]);return"list_no"!==f.b&&"list"!==f.b?a("argument type is not list-object.: "+d):{d:"[event]",b:"continue",a:f}}if("(throw"===d)return 3>b.length?a("arg_size < 3 : "+d):3<b.length?a("arg_size > 3 : "+d):"ident"!==b[1].b?a("argument is not catch-name.: "+
d):"list_no"!==b[2].b&&"list"!==b[2].b?a("argument type is not list-object.: "+d):{d:"[event]",b:"exception",c:b[1].a,a:h(b[2]).a};if("(until"===d)return 3>b.length?a("arg_size < 3 : "+d):3<b.length?a("arg_size > 3 : "+d):"ident"!==b[1].b?a("argument is not repeat-name.: "+d):"list_no"!==b[2].b&&"list"!==b[2].b?a("argument is not list-object.: "+d):{d:"[event]",b:"until",c:b[1].a,a:h(b[2]).a};if("(++"===d){if(2>b.length)return a("arg_size < 2 : "+d);if(2<b.length)return a("arg_size > 2 : "+d);p.push(q("+=",
b[1],{d:"[token]",b:"int",a:1}))}else if("(--"===d){if(2>b.length)return a("arg_size < 2 : "+d);if(2<b.length)return a("arg_size > 2 : "+d);p.push(q("-=",b[1],{d:"[token]",b:"int",a:1}))}else if("(+="===d){if(3>b.length)return a("arg_size < 3 : "+d);if(3<b.length)return a("arg_size > 3 : "+d);p.push(q("+=",b[1],b[2]))}else if("(-="===d){if(3<b.length)return a("arg_size > 3 : "+d);if(3>b.length)return a("arg_size < 3 : "+d);p.push(q("-=",b[1],b[2]))}else if("(*="===d){if(3>b.length)return a("arg_size < 3 : "+
d);if(3<b.length)return a("arg_size > 3 : "+d);p.push(q("*=",b[1],b[2]))}else if("(/="===d){if(3>b.length)return a("arg_size < 3 : "+d);if(3<b.length)return a("arg_size > 3 : "+d);p.push(q("/=",b[1],b[2]))}else if("(%="===d){if(3>b.length)return a("arg_size < 3 : "+d);if(3<b.length)return a("arg_size > 3 : "+d);p.push(q("%=",b[1],b[2]))}else if("(call"===d){if(3>b.length)return a("arg_size < 3 : "+d);if(3<b.length)return a("arg_size > 3 : "+d);e=h(b[1]);if("[event]"===e.d)return e;y=g.length;k=z(v[b[2].a]);
if("[event]"===k.d)return k;for(l=g.length-1;y-1<l;l--)g[l].c="_"+g[l].c;for(b=0;b<y;b++)f=g[b].c,"_"===f[0]&&(g[b].c="_."+f);if(e.g)for(k=e.g.a,l=k.length-1;0<=l;l--)"[stack]"===k[l].d&&g.push(k[l]);f=g.length;if("func_no"!==e.b)return a("not function.: "+e.c+"."+e.b);k=z(v[e.a]);if("[event]"===k.d)if("return"!==k.b){if(k=B(f,k),"[event]"===k.d)return k}else k={d:"[stack]",b:"list",a:k.a,c:"literal",e:!1,f:e.c};for(k.f=e.c;f<g.length;)d=g.pop(),d.g=k,k.a.unshift(d);for(;y<g.length;)d=g.pop();for(b in g)f=
g[b].c,"_"===f[0]&&"."===f[1]&&(g[b].c=f.substr(2,f.length-2));p.push(k)}else{if("(return"===d){if(2>b.length)return a("arg_size < 2 : "+d);if(2<b.length)return a("arg_size > 2 : "+d);k=h(b[1]);if("[event]"===k.d)return k;if("list"!==k.b)return a("argument type is not list-object.: "+d);var A=[];for(l in p)n=p[l],"[stack]"===n.d&&(n.c?"literal"===n.c?n.c="#"+A.length:"#"!==n.c[0]&&(n.c="#"+n.length):n.c="#"+A.length,A.push(n));for(l in k.a)n=r(k.a[l]),k.a[l].c?"#"!==n.c[0]&&(n.c="#"+A.length):(n=
r(h(n)),n.c="#"+A.length),A.push(n);return{d:"[event]",b:"return",a:A}}if("(range"===d){if(3>b.length)return a("arg_size < 3 : "+d);if(3<b.length)return a("arg_size > 3 : "+d);e=h(b[1]);if("[event]"===e.d)return e;if("int"!==e.b)return a("argument type is not int : "+e.c+"."+e.b);b=h(b[2]);if("[event]"===b.d)return b;if("int"!==b.b)return a("argument type is not int : "+b.c+"."+b.b);k={d:"[stack]",b:"list",a:[],c:"literal",e:!1,f:"range"};for(A=e.a;;)if(k.a.push({d:"[stack]",b:"int",a:A,c:"#"+k.a.length,
e:!1}),e.a<b.a){if(++A,A>b.a)break}else if(--A,A<b.a)break;p.push(k)}else if("(line"===d)u=b[1].a;else return a("unsupported token.: "+d)}}}}l={d:"[stack]",b:"list",a:[],c:"literal",e:!1,f:"noname"};if(0===p.length)return l;for(A in p){n=p[A];"ident"===n.b?n=h(n):"list_no"===n.b&&(n=h(n));if("[event]"===n.d)return n;n=r(n);"[stack]"===n.d?("literal"===n.c&&(n.c=""+l.a.length),"#"!==n.c[0]&&(n.c="#"+n.c),n.g=l,l.a.push(n)):"[token]"===n.d&&"func_no"===n.b&&(n.d="[stack]",n.c="#"+l.a.length,n.g=l,l.a.push(n))}return l}
var v=[],g=[],C=[],E="",u="",J=function(g){for(var a="",h=0;h<g.length;h++)switch(g[h]){case "'":a+="s";break;case '"':a+="S";break;case "/":a+="b";break;case "-":a+="b";break;case ".":a+="b";break;case "\n":a+="e";break;default:a+=" "}for(var q="",m=" ",h=0;h<a.length;h++){switch(a[h]){case "s":"s"===m?m=" ":"S"!==m&&(m="s");break;case "S":"S"===m?m=" ":"s"!==m&&(m="S")}q=" "!==m?q+m:q+a[h]}a="";m=" ";for(h=0;h<q.length;h++){c=q[h];switch(m+c){case " b":case "eb":"//"===g.substr(h,2)&&(c="c"),"---"===
g.substr(h,3)&&(c="c"),"..."===g.substr(h,3)&&(c="c")}switch(c){case "c":m="c";break;case "e":m=" "}" "===m&&(a+=g[h])}return a}(t);(function(g){v=[];for(var a=[],h=0;h<g.length;h++)if("}:}"===g[h])for(var q=[],m;m=a.pop();)if("ident"===m.b&&"{"===m.a){m=v.length;v.push(q);a.push({d:"[token]",b:"func_no",a:m});break}else q.unshift(m);else if("]:]"===g[h])for(q=[];m=a.pop();)if("ident"===m.b&&"["===m.a){m=v.length;v.push(q);a.push({d:"[token]",b:"list_no",a:m});break}else q.unshift(m);else q=g[h],
"a:true"===q?q={d:"[stack]",b:"bool",a:!0,c:"literal",e:!0}:"a:false"===q?q={d:"[stack]",b:"bool",a:!1,c:"literal",e:!0}:(m=q.substr(0,2),q="0:"===m?{d:"[stack]",b:"int",a:parseInt(q.substr(2,q.length-2),10),c:"literal",e:!0}:"s:"===m?{d:"[stack]",b:"str",a:q.substr(3,q.length-2-2),c:"literal",e:!0}:{d:"[token]",b:"ident",a:q.substr(2,q.length-2)}),a.push(q);v.push(a)})(function(g){for(var a="",h=0;h<J.length;h++)switch(g[h]){case " ":a+=" ";break;case "!":a+="a";break;case '"':a+="S";break;case "#":a+=
"a";break;case "$":a+="a";break;case "%":a+="a";break;case "&":a+="a";break;case "'":a+="s";break;case "(":a+="a";break;case ")":a+=")";break;case "*":a+="a";break;case "+":a+="a";break;case ",":a+="a";break;case "-":a+="a";break;case ".":a+="a";break;case "/":a+="a";break;case "0":a+="0";break;case "1":a+="0";break;case "2":a+="0";break;case "3":a+="0";break;case "4":a+="0";break;case "5":a+="0";break;case "6":a+="0";break;case "7":a+="0";break;case "8":a+="0";break;case "9":a+="0";break;case ":":a+=
"a";break;case ";":a+="a";break;case "<":a+="a";break;case "=":a+="a";break;case ">":a+="a";break;case "?":a+="a";break;case "@":a+="a";break;case "A":a+="a";break;case "B":a+="a";break;case "C":a+="a";break;case "D":a+="a";break;case "E":a+="a";break;case "F":a+="a";break;case "G":a+="a";break;case "H":a+="a";break;case "I":a+="a";break;case "J":a+="a";break;case "K":a+="a";break;case "L":a+="a";break;case "M":a+="a";break;case "N":a+="a";break;case "O":a+="a";break;case "P":a+="a";break;case "Q":a+=
"a";break;case "R":a+="a";break;case "S":a+="a";break;case "T":a+="a";break;case "U":a+="a";break;case "V":a+="a";break;case "W":a+="a";break;case "X":a+="a";break;case "Y":a+="a";break;case "Z":a+="a";break;case "[":a+="[";break;case "\\":a+="a";break;case "]":a+="]";break;case "^":a+="a";break;case "_":a+="a";break;case "`":a+="a";break;case "a":a+="a";break;case "b":a+="a";break;case "c":a+="a";break;case "d":a+="a";break;case "e":a+="a";break;case "f":a+="a";break;case "g":a+="a";break;case "h":a+=
"a";break;case "i":a+="a";break;case "j":a+="a";break;case "k":a+="a";break;case "l":a+="a";break;case "m":a+="a";break;case "n":a+="a";break;case "o":a+="a";break;case "p":a+="a";break;case "q":a+="a";break;case "r":a+="a";break;case "s":a+="a";break;case "t":a+="a";break;case "u":a+="a";break;case "v":a+="a";break;case "w":a+="a";break;case "x":a+="a";break;case "y":a+="a";break;case "z":a+="a";break;case "{":a+="{";break;case "|":a+="a";break;case "}":a+="}";break;case "~":a+="a";break;default:a+=
" "}for(var q="",m=" ",h=0;h<a.length;h++){switch(a[h]){case "s":"s"===m?m=" ":"S"!==m&&(m="s");break;case "S":"S"===m?m=" ":"s"!==m&&(m="S")}" "===m&&0<h&&"a"===a[h-1]&&"0"===a[h]?m="a":"a"===m&&"a"!==a[h]&&"0"!==a[h]&&(m=" ");q=" "!==m?q+m:q+a[h]}for(var a="",m=q[0],r=[],h=0;h<q.length;h++)m===q[h]?a+=g[h]:(" "!==m&&r.push(m+":"+a),a=g[h],m=q[h]);" "!==m&&r.push(m+":"+a);return r}(J));t={d:"[stack]",b:"list",a:[],c:"@",e:!1,f:"system_root"};t.a.push({d:"[stack]",b:"list",a:"",c:"#co",e:!1,f:"out_stream"});
g.push(t);t=z(v[v.length-1]);t=B(0,t);"[event]"===t.d&&C.push(""+t.b+": "+("exception"===t.b?0<t.a.length?t.c+" "+t.a[0].a:t.c:t.a)+(t.hasOwnProperty("debug_line")&&""!==t.h?"\n\tline:"+t.h:""));for(var K in C)E+="\n"+C[K];return E};