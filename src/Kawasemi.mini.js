function on_kawasemi(H){function v(){return{c:"[stack]",b:"list",a:[],d:"null",e:!1}}function F(h){for(var a in h){var g=h[a];"list"===g.b?F(g.a):"func_no"===g.b&&"dtor"===g.d&&w(p[g.a])}}function z(D){for(var a=v();D<h.length;){var g=h.pop();"list"===g.b?F(g.a):"func_no"===g.b&&"dtor"===g.d?a=w(p[g.a]):"out"===g.d&&(a=g)}return a}function w(D){function a(a){x.push("syntax-error : "+a+(""===s?"":"\n\tline:"+s));return{c:"[event]",b:"error",a:"syntax-error : "+a,f:"top"}}function g(a){x.push("exception : "+a+
(""===s?"":"\n\tline:"+s));return{c:"[event]",b:"exception",a:"exception : "+a,f:"top"}}function l(a){if("list_no"===a.b){var d=h.length;a=w(p[a.a]);if("[event]"===a.c)return a;for(;d<h.length;)h.pop();var d={c:"[stack]",b:"list",a:[],d:"literal",e:!1},b;for(b in a){var e=a[b];"[stack]"===e.c&&("literal"===e.d&&(e.d=""+b),"."!==e.d[0]&&(e.d="."+e.d),e.g=d)}d.a=a;return d}if("ident"!==a.b)return a;b=a.a;for(a=h.length-1;0<=a;a--)if("[stack]"===h[a].c&&h[a].d===b)return h[a];x.push("undefined variable.: "+
b+(""===s?"":"\n\tline:"+s));return{c:"[event]",b:"error",a:"undefined-var : "+b,f:"top"}}function k(b,d){var e=l(d);if("[event]"===e.c)return e;if("ident"!==b.b){if(!0===b.e&&!0===b.g.e)return a("cannot be set to a constant.: "+A(b.g));b.a=e.a;b.b=e.b;return b}for(var f=h.length-1;0<=f;f--){var g=h[f];if("[stack]"===g.c&&g.d===b.a){if(!0===g.e)return a("cannot be set to a constant.: "+A(g));if(g.b!==e.b)return a("unmatch types.: '"+g.b+":"+g.d+"' != '"+e.b+"'");g.a=e.a;g.b=e.b;e=y(g);e.d="literal";
return e}}x.push("undefined variable.: "+b.a+(""===s?"":"\n\tline:"+s));return{c:"[event]",b:"error",a:"undefined-var : "+b.a,f:"top"}}function I(b,d,e){d=l(d);if("[event]"===d.c)return d;e=l(e);if("[event]"===e.c)return e;if(d.b!==e.b)return{c:"[stack]",b:"bool",a:!1,d:"literal",e:!0};if("(>"===b)return{c:"[stack]",b:"bool",a:d.a>e.a,d:"literal",e:!0};if("(<"===b)return{c:"[stack]",b:"bool",a:d.a<e.a,d:"literal",e:!0};if("(>="===b)return{c:"[stack]",b:"bool",a:d.a>=e.a,d:"literal",e:!0};if("(<="===
b)return{c:"[stack]",b:"bool",a:d.a<=e.a,d:"literal",e:!0};if("(=="===b)return{c:"[stack]",b:"bool",a:d.a===e.a,d:"literal",e:!0};if("(!="===b)return{c:"[stack]",b:"bool",a:d.a!==e.a,d:"literal",e:!0};if("(&&"===b)return{c:"[stack]",b:"bool",a:d.a&&e.a,d:"literal",e:!0};if("(||"===b)return{c:"[stack]",b:"bool",a:d.a||e.a,d:"literal",e:!0};if("str"===d.b&&"str"===e.b&&1===d.a.length&&1===e.a.length){if("(+"===b)return{c:"[stack]",b:d.b,a:String.fromCharCode(d.a.charCodeAt(0)+e.a.charCodeAt(0)),d:"literal",
e:!0};if("(-"===b)return{c:"[stack]",b:d.b,a:String.fromCharCode(d.a.charCodeAt(0)-e.a.charCodeAt(0)),d:"literal",e:!0}}return"(*"===b?{c:"[stack]",b:d.b,a:d.a*e.a,d:"literal",e:!0}:"(/"===b?{c:"[stack]",b:d.b,a:Math.floor(d.a/e.a),d:"literal",e:!0}:"(%"===b?{c:"[stack]",b:d.b,a:d.a%e.a,d:"literal",e:!0}:"(+"===b?{c:"[stack]",b:d.b,a:d.a+e.a,d:"literal",e:!0}:"(-"===b?{c:"[stack]",b:d.b,a:d.a-e.a,d:"literal",e:!0}:"(&"===b?{c:"[stack]",b:d.b,a:d.a&e.a,d:"literal",e:!0}:"(|"===b?{c:"[stack]",b:d.b,
a:d.a|e.a,d:"literal",e:!0}:"(^"===b?{c:"[stack]",b:d.b,a:d.a^e.a,d:"literal",e:!0}:"(>>"===b?{c:"[stack]",b:d.b,a:d.a>>e.a,d:"literal",e:!0}:a(b)}function B(d,b,e){e=l(e);if("[event]"===e.c)return e;if("int"!==e.b)return a("variable type mismatch.: "+e.a+" "+e.b);if("ident"!==b.b){if(!0===b.e)return a("cannot be set to a constant.: "+A(b));if("int"!==b.b)return a("variable type mismatch.:"+b.a);if("*="===d)return{c:"[stack]",b:"int",a:b.a*=e.a,d:"literal",e:!1};if("/="===d)return{c:"[stack]",b:"int",
a:b.a=Math.floor(b.a/e.a),d:"literal",e:!1};if("%="===d)return{c:"[stack]",b:"int",a:b.a%=e.a,d:"literal",e:!1};if("+="===d)return{c:"[stack]",b:"int",a:b.a+=e.a,d:"literal",e:!1};if("-="===d)return{c:"[stack]",b:"int",a:b.a-=e.a,d:"literal",e:!1};x.push("undefined variable.: "+b.a+" "+d+(""===s?"":"\n\tline:"+s));return{c:"[event]",b:"error",a:"undefined-var:"+b.a,f:"top"}}for(var f=b.a,g=h.length-1;0<=g;g--){var k=h[g];if(k.d===f){if(!0===k.e)return a("cannot be set to a constant.: "+A(k));if("int"!==
k.b)return a("variable type mismatch.:"+A(k));if("*="===d)return{c:"[stack]",b:"int",a:k.a*=e.a,d:"literal",e:!1};if("/="===d)return{c:"[stack]",b:"int",a:k.a=Math.floor(k.a/e.a),d:"literal",e:!1};if("%="===d)return{c:"[stack]",b:"int",a:k.a%=e.a,d:"literal",e:!1};if("+="===d)return{c:"[stack]",b:"int",a:k.a+=e.a,d:"literal",e:!1};if("-="===d)return{c:"[stack]",b:"int",a:k.a-=e.a,d:"literal",e:!1}}}x.push("undefined variable.: "+b.a+" "+d+(""===s?"":"\n\tline:"+s));return{c:"[event]",b:"error",a:"undefined-var:"+
b.a,f:"top"}}function y(a){return{c:a.c,b:a.b,a:a.a,d:a.d,e:a.e}}function A(a){return"func_no"===a.b?a.d+":{}":"list"===a.b?a.d+":[]":"str"===a.b?a.d+":'"+a.a+"'":"int"===a.b?a.d+":"+a.a:a.d}if(!D)return[];for(var m=[],E=0;E<D.length;E++){var f=D[E];if("ident"!==f.b||")"!==f.a){if("("===f.a||"(each"===f.a||"(loop"===f.a)f.h=h.length;m.push(f)}else{for(var b=[],e=m.length-1;0<=e;--e){var d=m.pop();b.unshift(d);if("ident"===d.b&&"("===d.a[0])break}if(!(0>=b.length))if(f=b[0].a,"("===f)if(2>b.length)m.push(v());
else{e=z(b[0].h);if("[event]"===e.c)return e;"null"===e.d?m.push(b[b.length-1]):m.push(e)}else if("(at"===f||"(."===f){if(3>b.length)return a("arg_size < 3 : "+f);if("@"===b[1].a)d=y(b[1]),d.a=b[1].a+b[2].a,d.b="int",m.push(d);else{e=l(b[1]);if("[event]"===e.c)return e;d=b[2];"(at"===f&&(d=l(b[2]));d=("."===d.a[0]?"":".")+d.a;b=!1;".type"===d&&(b=e.b,"func_no"===b&&(b="func"),b={c:"[stack]",b:"str",a:b,d:"literal",e:!1},m.push(b));if(!1===b&&"[stack]"===e.c&&("list"===e.b||"map"===e.b)){if(!1===b)for(var n in e.a){b=
e.a[n];if(b.d===d){m.push(b);break}b=!1}if(!1===b){var r="";for(n=h.length-1;0<=n;n--)if("[stack]"===h[n].c&&h[n].d===d){b=h[n];break}!1!==b&&"int"===b.b&&0<=b.a&&b.a<e.a.length&&m.push(e.a[b.a])}if(!1===b)for(n in e.a){b=e.a[n];if(".unmatch"===b.d){m.push(b);break}b=!1}}if(!1===b)return x.push("undefined variable.: "+e.d+d+(""===s?"":"\n\tline:"+s)),{c:"[event]",b:"error",a:"undefined-var : "+e.d+d,f:"top"}}}else if("(:"===f||"(::"===f){if(3>b.length)return a("arg_size < 3 : "+f);e=b[1].a;if("ident"!==
b[1].b){if("int"!==b[1].b)return a("cannot define.: "+e);e=""+e}d=l(b[2]);if("[event]"===d.c)return d;d={c:"[stack]",b:d.b,a:d.a,d:e,e:"(:"===f};h.push(d);m.push(d)}else if("(="===f){if(3>b.length)return a("arg_size < 3 : "+f);d=k(b[1],b[2]);if("[event]"===d.c)return d;m.push(d)}else if("(<<"===f){if(3>b.length)return a("arg_size < 3 : "+f);if("@.co"===b[1].a){d=l(b[2]);if("str"===d.b||"int"===d.b)u+=d.a;else if("list"===d.b||"map"===d.b){u+="[ ";for(n in d.a)"."===d.a[n].d[0]&&(u+=A(d.a[n])+", ");
u+="]"}m.push(b[1])}else if("ident"!==b[1].b)return a("syntax-error?: "+b[1].a);for(n=h.length-1;0<=n;n--)if(e=h[n],"[stack]"===e.c&&e.d===b[1].a){if(!0===e.e)return a("cannot be set to a constant.: "+A(e));if("map"===e.b||"list"===e.b)d=l(b[2]),"literal"===d.d?e.a.push({c:d.c,b:d.b,a:d.a,d:"."+e.a.length,e:d.e,g:e}):(d=y(d),"."!==d.d[0]&&(d.d="."+d.d),e.a.push(d));else if("str"===e.b)e.a=""+e.a+l(b[2]).a;else if("int"===e.b){m.push({c:"[stack]",b:e.b,a:e.a<<l(b[2]).a,d:"literal",e:!0});break}m.push(b[1]);
break}}else if("(<"===f||"(>"===f||"(<="===f||"(>="===f||"(=="===f||"(!="===f||"(&&"===f||"(||"===f||"(*"===f||"(/"===f||"(%"===f||"(+"===f||"(-"===f||"(&"===f||"(|"===f||"(^"===f||"(>>"===f){if(3>b.length)return a("arg_size < 3 : "+f);m.push(I(f,b[1],b[2]))}else if("(??"===f){if(3>b.length)return a("arg_size < 3 : "+f);if("bool"===b[1].b&&!0===b[1].a){d=w(p[b[2].a]);if("[event]"===d.c)return d;for(var C in d)m.push(d[C])}else if(4===b.length){d=w(p[b[3].a]);if("[event]"===d.c)return d;for(C in d)m.push(d[C])}else m.push({c:"[token]",
b:"bool",a:!1,e:!0})}else if("(loop"===f){if(3>b.length)return a("arg_size < 3 : "+f);h.push({c:"[stack]",b:"str",a:"",d:"out",e:!1});f=h.length;d=v();for(e=0;100>e;e++){d=w(p[b[2].a]);if("[event]"===d.c&&"break"===d.b){if(d.f!==b[1].a){e=z(b[0].h);if("[event]"===e.c)return e;m.push(v());return d}h.pop();d.a.d="out";h.push(d.a);break}if("[event]"===d.c&&"continue"===d.b){if(d.f!==b[1].a){e=z(b[0].h);if("[event]"===e.c)return e;m.push(v());return d}}else if("[event]"===d.c)return d}if(100<=e)return g("loop limit-over: "+
b[1].a);e=z(b[0].h);if("[event]"===e.c)return e;m.push(e)}else if("(each"===f){if(3>b.length)return a("arg_size < 3 : "+f);e=l(b[1]);if("[event]"===e.c)return e;r=0;if("str"===e.b)r=e.a.length;else if("int"===e.b)r=e.a;else if("map"===e.b)r=e.a.length;else if("list"===e.b)r=e.a.length;else return a("each type error: "+e.b);f=h.length;h.push({c:"[stack]",b:e.b,a:0,d:"it",e:!0});h.push({c:"[stack]",b:"int",a:r,d:"max",e:!0});h.push({c:"[stack]",b:"str",a:"",d:"out",e:!1});for(var d=v(),t=0;t<r;t++){"str"===
e.b?h[f].a=e.a.substr(t,1):"int"===e.b?h[f].a=t:"map"===e.b?(d=y(l(e.a[t])),d.d="it",h[f]=d):"list"===e.b&&(d=y(l(e.a[t])),d.d="it",h[f]=d);d=w(p[b[2].a]);if("[event]"===d.c&&"break"===d.b){if("noname"!==d.f){e=z(b[0].h);if("[event]"===e.c)return e;m.push(v());return d}h.pop();d.a.d="out";h.push(d.a);break}if("[event]"===d.c&&"continue"===d.b){if("noname"!==d.f){e=z(b[0].h);if("[event]"===e.c)return e;m.push(v());return d}}else if("[event]"===d.c)return d}e=z(b[0].h);if("[event]"===e.c)return e;m.push(e)}else{if("(break"===
f)return 2===b.length?{c:"[event]",b:"break",a:v(),f:b[1].a}:3>b.length?a("arg_size < 3 : "+f):{c:"[event]",b:"break",a:l(b[2]),f:b[1].a};if("(continue"===f)return 2>b.length?a("arg_size < 2 : "+f):{c:"[event]",b:"continue",a:v(),f:b[1].a};if("(++"===f){if(2>b.length)return a("arg_size < 2 : "+f);m.push(B("+=",b[1],{c:"[token]",b:"int",a:1}))}else if("(--"===f){if(2>b.length)return a("arg_size < 2 : "+f);m.push(B("-=",b[1],{c:"[token]",b:"int",a:1}))}else if("(+="===f){if(3>b.length)return a("arg_size < 3 : "+
f);m.push(B("+=",b[1],b[2]))}else if("(-="===f){if(3>b.length)return a("arg_size < 3 : "+f);m.push(B("-=",b[1],b[2]))}else if("(*="===f){if(3>b.length)return a("arg_size < 3 : "+f);m.push(B("*=",b[1],b[2]))}else if("(/="===f){if(3>b.length)return a("arg_size < 3 : "+f);m.push(B("/=",b[1],b[2]))}else if("(%="===f){if(3>b.length)return a("arg_size < 3 : "+f);m.push(B("%=",b[1],b[2]))}else if("(call"===f){if(3>b.length)return a("arg_size < 3 : "+f);e=l(b[1]);if("[event]"===e.c)return e;if(e.g)for(d=
e.g.a,n=d.length-1;0<=n;n--)"[stack]"===d[n].c&&h.push(d[n]);f=h.length;if(3===b.length){d=w(p[b[2].a]);if("[event]"===d.c)return d;for(n=h.length-1;f-1<n;n--)h[n].d="_"+h[n].d;h.push({c:"[stack]",b:"int",a:h.length-f,d:"arg_size",e:!0})}for(b=0;b<f;b++)r=h[b].d,"_"===r[0]&&(h[b].d="_."+r);r=h.length;if("func_no"!==e.b)return a("func_no: "+e.a);d=w(p[e.a]);if("[event]"===d.c){if("return"!==d.b){for(;f<h.length;)h.pop();return d}d=d.a}if("list"!==d.b&&"map"!==d.b){t={c:"[stack]",b:"list",a:[],d:"out",
e:!1};e=!1;for(n in d){var q=y(d[n]);q.d&&".literal"!==q.d&&"literal"!==q.d?"out"===q.d?e=q:(q.g=t,t.a.push(q)):!1===e&&(e=l(q))}!1!==e&&(e.d=".0",e.e=!0,e.g=t,t.a.push(e));d=t}else for(n in d.a)q=d.a[n],q.d="."+q.d;for(;r<h.length;)e=h.pop();for(;f<h.length;)e=h.pop(),e.g=d,d.a.push(e);for(b in h)r=h[b].d,"_"===r[0]&&"."===r[1]&&(h[b].d=r.substr(2,r.length-2));m.push(d)}else{if("(return"===f){if(2>b.length)return a("arg_size < 2 : "+f);d=l(b[1]);if("[event]"===d.c)return d;if("list"===d.b||"map"===
d.b)for(n in C=0,d.a)q=y(d.a[n]),d.a[n].d?"."!==q.d[0]&&(q.d="."+q.d):(q=y(l(q)),q.d="."+C,C++),m.push(q);else return a("return not list : "+f);return{c:"[event]",b:"return",a:m}}if("(line"===f)s=b[1].a;else return a("program_error: "+f)}}}}return m}var p=[],h=[],x=[],u="",s="",G=function(h){for(var a="",g=0;g<h.length;g++)switch(h[g]){case "'":a+="s";break;case '"':a+="S";break;case "/":a+="b";break;case "-":a+="b";break;case ".":a+="b";break;case "\n":a+="e";break;default:a+=" "}for(var l="",k=
" ",g=0;g<a.length;g++){switch(a[g]){case "s":"s"===k?k=" ":"S"!==k&&(k="s");break;case "S":"S"===k?k=" ":"s"!==k&&(k="S")}l=" "!==k?l+k:l+a[g]}a="";k=" ";for(g=0;g<l.length;g++){c=l[g];switch(k+c){case " b":case "eb":"//"===h.substr(g,2)&&(c="c"),"---"===h.substr(g,3)&&(c="c"),"..."===h.substr(g,3)&&(c="c")}switch(c){case "c":k="c";break;case "e":k=" "}" "===k&&(a+=h[g])}return a}(H);(function(h){p=[];for(var a=[],g=0;g<h.length;g++)if("}:}"===h[g])for(var l=[],k;k=a.pop();)if("ident"===k.b&&"{"===
k.a){k=p.length;p.push(l);a.push({c:"[token]",b:"func_no",a:k});break}else l.unshift(k);else if("]:]"===h[g])for(l=[];k=a.pop();)if("ident"===k.b&&"["===k.a){k=p.length;p.push(l);a.push({c:"[token]",b:"list_no",a:k});break}else l.unshift(k);else l=h[g],"a:true"===l?l={c:"[stack]",b:"bool",a:!0,d:"literal",e:!0}:"a:false"===l?l={c:"[stack]",b:"bool",a:!1,d:"literal",e:!0}:(k=l.substr(0,2),l="0:"===k?{c:"[stack]",b:"int",a:parseInt(l.substr(2,l.length-2)),d:"literal",e:!0}:"s:"===k?{c:"[stack]",b:"str",
a:l.substr(3,l.length-2-2),d:"literal",e:!0}:{c:"[token]",b:"ident",a:l.substr(2,l.length-2)}),a.push(l);p.push(a)})(function(h){for(var a="",g=0;g<G.length;g++)switch(h[g]){case " ":a+=" ";break;case "!":a+="a";break;case '"':a+="S";break;case "#":a+="a";break;case "$":a+="a";break;case "%":a+="a";break;case "&":a+="a";break;case "'":a+="s";break;case "(":a+="a";break;case ")":a+=")";break;case "*":a+="a";break;case "+":a+="a";break;case ",":a+="a";break;case "-":a+="a";break;case ".":a+="a";break;
case "/":a+="a";break;case "0":a+="0";break;case "1":a+="0";break;case "2":a+="0";break;case "3":a+="0";break;case "4":a+="0";break;case "5":a+="0";break;case "6":a+="0";break;case "7":a+="0";break;case "8":a+="0";break;case "9":a+="0";break;case ":":a+="a";break;case ";":a+="a";break;case "<":a+="a";break;case "=":a+="a";break;case ">":a+="a";break;case "?":a+="a";break;case "@":a+="a";break;case "A":a+="a";break;case "B":a+="a";break;case "C":a+="a";break;case "D":a+="a";break;case "E":a+="a";break;
case "F":a+="a";break;case "G":a+="a";break;case "H":a+="a";break;case "I":a+="a";break;case "J":a+="a";break;case "K":a+="a";break;case "L":a+="a";break;case "M":a+="a";break;case "N":a+="a";break;case "O":a+="a";break;case "P":a+="a";break;case "Q":a+="a";break;case "R":a+="a";break;case "S":a+="a";break;case "T":a+="a";break;case "U":a+="a";break;case "V":a+="a";break;case "W":a+="a";break;case "X":a+="a";break;case "Y":a+="a";break;case "Z":a+="a";break;case "[":a+="[";break;case "\\":a+="a";
break;case "]":a+="]";break;case "^":a+="a";break;case "_":a+="a";break;case "`":a+="a";break;case "a":a+="a";break;case "b":a+="a";break;case "c":a+="a";break;case "d":a+="a";break;case "e":a+="a";break;case "f":a+="a";break;case "g":a+="a";break;case "h":a+="a";break;case "i":a+="a";break;case "j":a+="a";break;case "k":a+="a";break;case "l":a+="a";break;case "m":a+="a";break;case "n":a+="a";break;case "o":a+="a";break;case "p":a+="a";break;case "q":a+="a";break;case "r":a+="a";break;case "s":a+=
"a";break;case "t":a+="a";break;case "u":a+="a";break;case "v":a+="a";break;case "w":a+="a";break;case "x":a+="a";break;case "y":a+="a";break;case "z":a+="a";break;case "{":a+="{";break;case "|":a+="a";break;case "}":a+="}";break;case "~":a+="a";break;default:a+=" "}for(var l="",k=" ",g=0;g<a.length;g++){switch(a[g]){case "s":"s"===k?k=" ":"S"!==k&&(k="s");break;case "S":"S"===k?k=" ":"s"!==k&&(k="S")}" "===k&&0<g&&"a"===a[g-1]&&"0"===a[g]?k="a":"a"===k&&"a"!==a[g]&&"0"!==a[g]&&(k=" ");l=" "!==k?
l+k:l+a[g]}for(var a="",k=l[0],p=[],g=0;g<l.length;g++)k===l[g]?a+=h[g]:(" "!==k&&p.push(k+":"+a),a=h[g],k=l[g]);" "!==k&&p.push(k+":"+a);return p}(G));w(p[p.length-1]);0<x.length&&(u+=x+"\n");return u};
